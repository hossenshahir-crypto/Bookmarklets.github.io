# Bookmarklets.github.io
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Bookmarklets Hub â€” Tools & Games (Overlay)</title>
<style>
  :root{--bg:#071126;--card:#0b1320;--accent:#1f9fff;--muted:#9fb4d6;--btnText:#012026}
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;color:#e6eef8;background:linear-gradient(180deg,#051221,#07122b);min-height:100vh;display:flex;align-items:center;justify-content:center;margin:0;padding:28px}
  .wrap{max-width:1000px;width:100%}
  h1{text-align:center;margin:0 0 14px;font-size:1.6rem}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px}
  .card{background:var(--card);padding:14px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);display:flex;flex-direction:column;justify-content:space-between;min-height:120px}
  .title{font-weight:800;margin-bottom:8px}
  .muted{color:var(--muted);font-size:0.95rem;margin-bottom:12px}
  a.btn{display:inline-block;padding:10px 14px;border-radius:8px;background:var(--accent);color:var(--btnText);text-decoration:none;font-weight:800;text-align:center;cursor:grab}
  a.btn:hover{filter:brightness(1.05)}
  footer{color:#8faac6;text-align:center;margin-top:18px;font-size:0.9rem}
  code{background:rgba(255,255,255,0.03);padding:3px 6px;border-radius:6px}
  @media (max-width:520px){body{padding:12px}}
</style>
</head>
<body>
  <div class="wrap">
    <h1>ðŸ”– Drag these to your bookmarks bar â€” Tools & Games (Overlay)</h1>

    <div class="grid" id="cards">
      <!-- cards generated by JS -->
    </div>

    <footer>
      <div>Note: Script Injector runs code in the page context â€” only run code you trust.</div>
    </footer>
  </div>

<script>
/*
  makeBookmarklet(name, code)
  - code: a JavaScript string (not a URI-encoded one)
  The function encodes code, then produces href that decodes and executes it when clicked as a bookmarklet.
  We create the anchor tags dynamically to avoid GitHub Pages sanitization.
*/
function makeBookmarklet(name, code, description){
  const esc = encodeURIComponent(code);
  const href = "javascript:(function(){var code=decodeURIComponent('" + esc + "'); (new Function(code))();})();";
  const card = document.createElement('div');
  card.className = 'card';
  const title = document.createElement('div'); title.className='title'; title.textContent = name;
  const muted = document.createElement('div'); muted.className='muted'; muted.textContent = description || '';
  const anchor = document.createElement('a');
  anchor.className='btn';
  anchor.href = href;
  anchor.textContent = 'Drag: ' + name;
  // add elements
  card.appendChild(title);
  card.appendChild(muted);
  card.appendChild(anchor);
  document.getElementById('cards').appendChild(card);
}

/* -------------------------
   Define each tool's code
   ------------------------- */

/* 1) Edit Page Text */
const codeEdit = `
(function(){
  document.designMode = (document.designMode === 'on' ? 'off' : 'on');
  document.body.contentEditable = (document.designMode === 'on');
  alert('Edit mode: ' + document.designMode + '\\nClick any text to edit. Reload to restore.');
})();
`;

/* 2) Developer Console (overlay) */
const codeDevConsole = `
(function(){
  if(window.__bm_devconsole_open){
    const el = document.getElementById('__bm_devconsole');
    if(el) el.style.display = (el.style.display === 'none' ? 'flex' : 'none');
    return;
  }
  window.__bm_devconsole_open = true;
  const wrap = document.createElement('div');
  wrap.id='__bm_devconsole';
  wrap.style = "position:fixed;right:18px;bottom:18px;width:480px;height:320px;background:rgba(3,6,12,0.96);color:#e6eef8;border-radius:10px;padding:8px;z-index:2147483646;display:flex;flex-direction:column;font-family:ui-monospace,Menlo,monospace;";
  const top = document.createElement('div'); top.style='display:flex;justify-content:space-between;align-items:center;padding:6px;';
  const title = document.createElement('div'); title.textContent='Mini Console'; title.style.fontWeight='700';
  const btns = document.createElement('div');
  const clearBtn = document.createElement('button'); clearBtn.textContent='Clear'; clearBtn.style='margin-right:6px;';
  const closeBtn = document.createElement('button'); closeBtn.textContent='âœ•';
  [clearBtn, closeBtn].forEach(b=>{b.style.cursor='pointer'; b.style.border='0'; b.style.background='transparent'; b.style.color='white';});
  btns.appendChild(clearBtn); btns.appendChild(closeBtn);
  top.appendChild(title); top.appendChild(btns);
  const out = document.createElement('pre'); out.style='flex:1;margin:6px 0;padding:8px;overflow:auto;background:rgba(0,0,0,0.4);border-radius:6px;';
  out.textContent = 'Console ready. Type JS below and press Enter.\\n';
  const inputWrap = document.createElement('div'); inputWrap.style='display:flex;gap:8px;';
  const input = document.createElement('input'); input.placeholder='Type JavaScript and press Enter â†’'; input.style='flex:1;padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:white;outline:none;';
  const run = document.createElement('button'); run.textContent='Run'; run.style='padding:8px;border-radius:6px;border:0;background:#1f9fff;color:#012;font-weight:700;cursor:pointer;';
  inputWrap.appendChild(input); inputWrap.appendChild(run);
  wrap.appendChild(top); wrap.appendChild(out); wrap.appendChild(inputWrap);
  document.body.appendChild(wrap);
  function log(v){ try{ out.textContent += String(v) + '\\n'; out.scrollTop = out.scrollHeight; }catch(e){} }
  run.onclick = function(){ try{ var res = eval(input.value); log('> ' + input.value); log(res); }catch(e){ log('Error: '+e); } input.value=''; }
  input.addEventListener('keydown', function(e){ if(e.key==='Enter'){ run.onclick(); }});
  clearBtn.onclick = function(){ out.textContent='Console cleared.\\n'; }
  closeBtn.onclick = function(){ wrap.remove(); window.__bm_devconsole_open = false; }
})();
`;

/* 3) Games Hub (overlay on current page) - includes many games */
const codeGamesHub = `
(function(){
  if(window.__bm_games_overlay){
    // toggle visibility
    const ex = document.getElementById('__bm_games_overlay');
    if(ex) ex.style.display = (ex.style.display === 'none' ? 'flex' : 'none');
    return;
  }
  // create overlay
  const overlay = document.createElement('div');
  overlay.id='__bm_games_overlay';
  overlay.style = 'position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(2,6,23,0.85);z-index:2147483646;font-family:sans-serif;padding:18px;';
  const pane = document.createElement('div');
  pane.style = 'width:920px;max-width:96%;height:700px;max-height:96%;background:linear-gradient(180deg,#081124,#071426);border-radius:12px;padding:12px;display:flex;flex-direction:column;box-shadow:0 20px 50px rgba(0,0,0,0.6);color:#e6eef8;';
  const header = document.createElement('div');
  header.style='display:flex;justify-content:space-between;align-items:center;gap:12px';
  const title = document.createElement('div'); title.innerHTML='<strong style="font-size:18px">ðŸŽ® Games Hub</strong><div style="font-size:12px;color:#9fb4d6">Play games â€” overlay will close on reload</div>';
  const headerBtns = document.createElement('div');
  const closeBtn = document.createElement('button'); closeBtn.textContent='Close'; closeBtn.style='padding:8px 12px;border-radius:8px;border:0;background:#ef4444;color:#fff;cursor:pointer';
  const infoBtn = document.createElement('button'); infoBtn.textContent='Reset'; infoBtn.style='margin-right:8px;padding:8px 12px;border-radius:8px;border:0;background:#1f9fff;color:#012;font-weight:700;cursor:pointer';
  headerBtns.appendChild(infoBtn); headerBtns.appendChild(closeBtn);
  header.appendChild(title); header.appendChild(headerBtns);
  pane.appendChild(header);

  // controls
  const controls = document.createElement('div');
  controls.style='margin-top:10px;display:flex;gap:8px;flex-wrap:wrap';
  const games = ['Snake','TicTacToe','Pong','Breakout','CookieClicker','Flappy','Shooter','2048'];
  games.forEach(g=>{
    const b=document.createElement('button');
    b.textContent=g;
    b.style='background:#1572e8;color:#fff;border:0;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:700';
    b.onclick=()=>startGame(g);
    controls.appendChild(b);
  });
  pane.appendChild(controls);

  // canvas area
  const cvsWrap = document.createElement('div');
  cvsWrap.style='flex:1;margin-top:10px;display:flex;align-items:center;justify-content:center';
  const canvas = document.createElement('canvas');
  canvas.id='__bm_games_canvas'; canvas.width = 840; canvas.height = 520;
  canvas.style='background:#000;border-radius:8px;max-width:100%;height:auto';
  cvsWrap.appendChild(canvas);
  pane.appendChild(cvsWrap);

  // footer / instructions
  const foot = document.createElement('div');
  foot.style='margin-top:10px;display:flex;justify-content:space-between;align-items:center';
  foot.innerHTML = '<div style="color:#9fb4d6;font-size:13px">Tips: use arrow keys for many games; click canvas for actions.</div>';
  pane.appendChild(foot);

  overlay.appendChild(pane);
  document.body.appendChild(overlay);

  closeBtn.onclick = function(){ overlay.remove(); window.__bm_games_overlay = false; }
  infoBtn.onclick = function(){ // quick reset
    try{document.getElementById('__bm_games_canvas').getContext('2d').clearRect(0,0,canvas.width,canvas.height);}catch(e){}
  }

  window.__bm_games_overlay = true;

  const ctx = canvas.getContext('2d');

  // helper to clear events/timeouts
  let __bm_game_interval = null;
  function stopCurrent(){
    if(__bm_game_interval){ clearInterval(__bm_game_interval); __bm_game_interval = null; }
    window.onkeydown = null;
    canvas.onclick = null;
    canvas.onmousemove = null;
    // clear canvas
    ctx.fillStyle='#000'; ctx.fillRect(0,0,canvas.width,canvas.height);
  }

  /* --- Games implementations --- */

  function startGame(name){
    stopCurrent();
    if(name === 'Snake') startSnake();
    if(name === 'TicTacToe') startTTT();
    if(name === 'Pong') startPong();
    if(name === 'Breakout') startBreakout();
    if(name === 'CookieClicker') startCookie();
    if(name === 'Flappy') startFlappy();
    if(name === 'Shooter') startShooter();
    if(name === '2048') start2048();
  }

  /* Snake */
  function startSnake(){
    const S = 20, cols = Math.floor(canvas.width / S), rows = Math.floor(canvas.height / S);
    let px = 5, py = 5, dx = 1, dy = 0, tail = 5, trail = [], food = {x:10,y:8}, dead=false;
    window.onkeydown = function(e){ if(e.key.startsWith('Arrow')){ dx = (e.key==='ArrowLeft')?-1:(e.key==='ArrowRight')?1:0; dy = (e.key==='ArrowUp')?-1:(e.key==='ArrowDown')?1:0; } };
    __bm_game_interval = setInterval(()=>{
      px += dx; py += dy;
      if(px < 0) px = cols-1; if(px >= cols) px = 0; if(py < 0) py = rows-1; if(py >= rows) py = 0;
      ctx.fillStyle='#001'; ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.fillStyle='lime';
      for(let i=0;i<trail.length;i++){ ctx.fillRect(trail[i].x*S, trail[i].y*S, S-2, S-2); }
      trail.push({x:px,y:py}); while(trail.length>tail) trail.shift();
      if(px===food.x && py===food.y){ tail++; food = {x:Math.floor(Math.random()*cols), y:Math.floor(Math.random()*rows)}; }
      ctx.fillStyle='red'; ctx.fillRect(food.x*S, food.y*S, S-2, S-2);
      if(trail.slice(0,-1).some(s=>s.x===px && s.y===py)){ clearInterval(__bm_game_interval); __bm_game_interval=null; alert('Game Over (Snake)'); }
    },90);
  }

  /* Tic-Tac-Toe */
  function startTTT(){
    const size = Math.min(canvas.width, canvas.height);
    canvas.width = size; canvas.height = size;
    let board = Array(9).fill(null), turn='X';
    function draw(){
      ctx.fillStyle='#001'; ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.strokeStyle='#fff'; ctx.lineWidth=2;
      for(let i=1;i<3;i++){ ctx.beginPath(); ctx.moveTo(i*(canvas.width/3),0); ctx.lineTo(i*(canvas.width/3),canvas.height); ctx.moveTo(0,i*(canvas.height/3)); ctx.lineTo(canvas.width,i*(canvas.height/3)); ctx.stroke(); }
      ctx.fillStyle='#fff'; ctx.font = (canvas.width/6)+'px sans-serif'; ctx.textAlign='center'; ctx.textBaseline='middle';
      for(let i=0;i<9;i++){ if(board[i]) ctx.fillText(board[i], (i%3)*(canvas.width/3)+canvas.width/6, Math.floor(i/3)*(canvas.height/3)+canvas.height/6); }
    }
    draw();
    canvas.onclick = function(e){
      const x = Math.floor(e.offsetX/(canvas.width/3)), y = Math.floor(e.offsetY/(canvas.height/3)), idx = y*3 + x;
      if(!board[idx]){ board[idx]=turn; turn = (turn==='X'?'O':'X'); draw(); }
    };
  }

  /* Pong (simple) */
  function startPong(){
    canvas.width = 840; canvas.height = 520;
    let ball = {x:420,y:260,dx:4,dy:3}, paddleY = 200;
    canvas.onmousemove = function(e){ paddleY = e.clientY - canvas.getBoundingClientRect().top - 50; }
    __bm_game_interval = setInterval(()=>{
      ball.x += ball.dx; ball.y += ball.dy;
      if(ball.y < 0 || ball.y > canvas.height) ball.dy *= -1;
      if(ball.x < 0 || ball.x > canvas.width) ball.dx *= -1;
      ctx.fillStyle='#001'; ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.fillStyle='#fff'; ctx.fillRect(canvas.width-40, paddleY, 12, 100);
      ctx.beginPath(); ctx.arc(ball.x, ball.y, 8, 0, Math.PI*2); ctx.fill();
      if(ball.x>canvas.width-52 && ball.y>paddleY && ball.y<paddleY+100){ ball.dx *= -1; }
      if(ball.x > canvas.width){ clearInterval(__bm_game_interval); __bm_game_interval=null; alert('Game Over (Pong)'); }
    },16);
  }

  /* Breakout */
  function startBreakout(){
    canvas.width = 840; canvas.height = 520;
    let bricks = [];
    for(let r=0;r<4;r++) for(let c=0;c<10;c++) bricks.push({x:78*c+10,y:28*r+10,w:72,h:20,hit:false});
    let paddle = {x:canvas.width/2-40,y:canvas.height-40,w:80,h:10}, ball={x:canvas.width/2,y:200,dx:3,dy:3};
    canvas.onmousemove = e=>{ paddle.x = e.clientX - canvas.getBoundingClientRect().left - paddle.w/2; }
    __bm_game_interval = setInterval(()=>{
      ball.x += ball.dx; ball.y += ball.dy;
      if(ball.x<0||ball.x>canvas.width) ball.dx *= -1;
      if(ball.y<0) ball.dy *= -1;
      if(ball.y>paddle.y && ball.x>paddle.x && ball.x<paddle.x+paddle.w) ball.dy *= -1;
      ctx.fillStyle='#001'; ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.fillStyle='#fff'; ctx.fillRect(paddle.x,paddle.y,paddle.w,paddle.h);
      ctx.beginPath(); ctx.arc(ball.x,ball.y,8,0,Math.PI*2); ctx.fill();
      for(let b of bricks){ if(!b.hit){ ctx.fillStyle='#b33'; ctx.fillRect(b.x,b.y,b.w,b.h); } if(!b.hit && ball.x>b.x && ball.x<b.x+b.w && ball.y>b.y && ball.y<b.y+b.h){ b.hit=true; ball.dy*=-1; } }
      if(ball.y>canvas.height){ clearInterval(__bm_game_interval); __bm_game_interval=null; alert('Game Over (Breakout)'); }
      if(bricks.every(b=>b.hit)){ clearInterval(__bm_game_interval); __bm_game_interval=null; alert('You cleared all bricks!'); }
    },16);
  }

  /* Cookie Clicker (mini) */
  function startCookie(){
    canvas.width = 840; canvas.height = 520;
    let cookies = 0;
    function draw(){ ctx.fillStyle='#001'; ctx.fillRect(0,0,canvas.width,canvas.height); ctx.fillStyle='#c47'; ctx.beginPath(); ctx.arc(canvas.width/2, canvas.height/2, 80,0,Math.PI*2); ctx.fill(); ctx.fillStyle='#fff'; ctx.font='22px sans-serif'; ctx.fillText('Cookies: '+cookies,20,30); }
    draw();
    canvas.onclick = function(e){
      const dx = e.offsetX - canvas.width/2, dy = e.offsetY - canvas.height/2;
      if(dx*dx + dy*dy < 80*80){ cookies++; draw(); }
    };
  }

  /* Flappy (simple) */
  function startFlappy(){
    canvas.width = 840; canvas.height = 520;
    let bird = {x:120,y:260,vy:0}, pipes = [], tick=0;
    window.onkeydown = function(e){ if(e.key === ' ' || e.key === 'Spacebar') bird.vy = -6; }
    __bm_game_interval = setInterval(()=>{
      tick++; bird.vy += 0.35; bird.y += bird.vy;
      if(tick % 90 === 0) pipes.push({x:canvas.width, y: Math.random()*220 + 80});
      ctx.fillStyle='#001'; ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.fillStyle='yellow'; ctx.beginPath(); ctx.arc(bird.x,bird.y,12,0,Math.PI*2); ctx.fill();
      for(let p of pipes){ p.x -= 2; ctx.fillStyle='#0b3'; ctx.fillRect(p.x,0,50,p.y-80); ctx.fillRect(p.x,p.y+80,50,canvas.height); if(bird.x>p.x && bird.x<p.x+50 && (bird.y<p.y-80 || bird.y>p.y+80)){ clearInterval(__bm_game_interval); __bm_game_interval=null; alert('Game Over (Flappy)'); } }
      if(bird.y > canvas.height || bird.y < 0){ clearInterval(__bm_game_interval); __bm_game_interval=null; alert('Game Over (Flappy)'); }
    },20);
  }

  /* Space Shooter */
  function startShooter(){
    canvas.width = 840; canvas.height = 520;
    let ship = {x:canvas.width/2-15,y:canvas.height-40,w:30,h:12}, bullets = [], enemies = [], spawn=0;
    canvas.onmousemove = e => { ship.x = e.clientX - canvas.getBoundingClientRect().left - ship.w/2; }
    canvas.onclick = () => { bullets.push({x:ship.x+ship.w/2,y:ship.y-6}); }
    __bm_game_interval = setInterval(()=>{
      spawn++; if(spawn%30===0) enemies.push({x:Math.random()*(canvas.width-40),y:-20});
      bullets.forEach(b=>b.y-=8); enemies.forEach(en=>en.y+=2);
      ctx.fillStyle='#001'; ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.fillStyle='white'; ctx.fillRect(ship.x,ship.y,ship.w,ship.h);
      bullets.forEach(b=>ctx.fillRect(b.x,b.y,4,8)); enemies.forEach(en=>ctx.fillRect(en.x,en.y,32,16));
      bullets.forEach((b,i)=>{ enemies.forEach((en,j)=>{ if(b.x>en.x && b.x<en.x+32 && b.y>en.y && b.y<en.y+16){ enemies.splice(j,1); bullets.splice(i,1); } }); });
      if(enemies.some(en=>en.y>canvas.height)){ clearInterval(__bm_game_interval); __bm_game_interval=null; alert('Game Over (Shooter)'); }
    },30);
  }

  /* 2048 minimal */
  function start2048(){
    canvas.width = 840; canvas.height = 520;
    let grid = [[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];
    function addRand(){ let empt=[]; for(let r=0;r<4;r++) for(let c=0;c<4;c++) if(grid[r][c]===0) empt.push([r,c]); if(!empt.length) return; let [r,c]=empt[Math.floor(Math.random()*empt.length)]; grid[r][c]=Math.random()<0.9?2:4; }
    function draw(){ ctx.fillStyle='#001'; ctx.fillRect(0,0,canvas.width,canvas.height); ctx.font='36px sans-serif'; ctx.textAlign='center'; ctx.textBaseline='middle'; for(let r=0;r<4;r++) for(let c=0;c<4;c++){ ctx.fillStyle = grid[r][c] ? '#efefef' : '#444'; ctx.fillRect(c*200+20, r*120+20, 160, 100); ctx.fillStyle = grid[r][c] ? '#000' : '#fff'; if(grid[r][c]) ctx.fillText(grid[r][c], c*200+100, r*120+70); } }
    function slide(row){ let arr=row.filter(v=>v), res=[]; for(let v of arr){ if(res.length && res[res.length-1]===v){ res[res.length-1]*=2; res.push(0);} else res.push(v);} res=res.filter(v=>v); while(res.length<4) res.push(0); return res; }
    function move(dir){ let moved=false; if(dir==='left'){ for(let r=0;r<4;r++){ let old=grid[r].slice(); grid[r]=slide(grid[r]); if(JSON.stringify(old)!==JSON.stringify(grid[r])) moved=true; } }
      if(dir==='right'){ for(let r=0;r<4;r++){ let old=grid[r].slice(); grid[r]=slide(grid[r].slice().reverse()).reverse(); if(JSON.stringify(old)!==JSON.stringify(grid[r])) moved=true; } }
      if(dir==='up'){ for(let c=0;c<4;c++){ let col=[]; for(let r=0;r<4;r++) col.push(grid[r][c]); let old=col.slice(); col=slide(col); for(let r=0;r<4;r++) grid[r][c]=col[r]; if(JSON.stringify(old)!==JSON.stringify(col)) moved=true; } }
      if(dir==='down'){ for(let c=0;c<4;c++){ let col=[]; for(let r=0;r<4;r++) col.push(grid[r][c]); let old=col.slice(); col=slide(col.reverse()).reverse(); for(let r=0;r<4;r++) grid[r][c]=col[r]; if(JSON.stringify(old)!==JSON.stringify(col)) moved=true; } }
      if(moved) addRand(); draw();
    }
    addRand(); addRand(); draw();
    window.onkeydown = function(e){ if(e.key==='ArrowLeft') move('left'); if(e.key==='ArrowRight') move('right'); if(e.key==='ArrowUp') move('up'); if(e.key==='ArrowDown') move('down'); };
  }

  // end Games Hub
})();
`;

/* 4) Improved Mini Browser â€” opens a popup */
const codeMiniBrowser = `
(function(){
  try{
    var w = window.open('','__bm_minibrowser','width=1000,height=700,resizable=yes,scrollbars=yes');
    if(!w){ alert('Popup blocked â€” allow popups for this site.'); return; }
    w.document.write('<!doctype html><html><meta charset="utf-8"><title>Mini Browser</title><style>body{margin:0;height:100vh;display:flex;flex-direction:column;font-family:sans-serif}#bar{display:flex;padding:8px;gap:8px;background:#222}input{flex:1;padding:8px;border-radius:6px;border:0}button{padding:8px;border-radius:6px;border:0;background:#0b5cff;color:#fff}iframe{flex:1;border:0}</style><div id="bar"><input id="u" placeholder="https://example.com"><button id="g">Go</button></div><iframe id="f" src="about:blank"></iframe><script>const input=document.getElementById("u"),btn=document.getElementById("g"),frame=document.getElementById("f");function nav(){let v=input.value.trim(); if(!/^https?:\\/\\//.test(v)) v='https://'+v; frame.src=v;} btn.onclick=nav; input.addEventListener("keydown",e=>{ if(e.key==='Enter') nav(); });</script></html>');
  }catch(e){ alert('Mini Browser error: '+e); }
})();
`;

/* 5) Script Injector (overlay on current page) - safer, user pastes code and clicks Inject */
const codeScriptInjector = `
(function(){
  if(window.__bm_injector_overlay){
    const ex = document.getElementById('__bm_injector_overlay');
    if(ex) ex.style.display = (ex.style.display === 'none' ? 'flex' : 'none');
    return;
  }
  window.__bm_injector_overlay = true;
  const overlay = document.createElement('div');
  overlay.id='__bm_injector_overlay';
  overlay.style='position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.7);z-index:2147483646;font-family:monospace;';
  const box = document.createElement('div');
  box.style='width:760px;max-width:96%;background:#071026;padding:12px;border-radius:10px;color:#e6eef8';
  box.innerHTML = '<div style="display:flex;justify-content:space-between;align-items:center"><strong>Script Injector</strong><div><button id="__inj_close" style="background:#ef4444;border:0;padding:6px 10px;border-radius:8px;color:white;cursor:pointer">Close</button></div></div><div style="margin-top:8px;color:#9fb4d6;font-size:13px">Paste JavaScript below and press Inject. <strong>Only run trusted code.</strong></div><textarea id="__inj_area" style="width:100%;height:300px;margin-top:8px;background:#00101a;color:#e6eef8;border-radius:8px;border:0;padding:8px;font-family:monospace"></textarea><div style="margin-top:8px;display:flex;gap:8px"><button id="__inj_run" style="padding:8px 12px;border-radius:8px;border:0;background:#1f9fff;color:#012;font-weight:800;cursor:pointer">Inject</button><button id="__inj_save" style="padding:8px 12px;border-radius:8px;border:0;background:#1572e8;color:white;cursor:pointer">Save</button><button id="__inj_restore" style="padding:8px 12px;border-radius:8px;border:0;background:#64748b;color:white;cursor:pointer">Load Saved</button></div>';
  overlay.appendChild(box);
  document.body.appendChild(overlay);
  document.getElementById('__inj_close').onclick = function(){ overlay.remove(); window.__bm_injector_overlay=false; }
  const area = document.getElementById('__inj_area');
  document.getElementById('__inj_run').onclick = function(){
    try{ (new Function(area.value))(); alert('Script executed'); } catch(e){ alert('Injection error: '+e); }
  };
  document.getElementById('__inj_save').onclick = function(){ localStorage.setItem('__bm_saved_inject', area.value); alert('Saved'); };
  document.getElementById('__inj_restore').onclick = function(){ area.value = localStorage.getItem('__bm_saved_inject') || ''; alert('Loaded'); };
  area.value = '';
})();
`;

/* 6) Simulate Crash (visual only) */
const codeSimCrash = `
(function(){
  if(window.__bm_sim_crash_active){
    const ex = document.getElementById('__bm_sim_crash');
    if(ex) ex.remove();
    window.__bm_sim_crash_active = false;
    document.removeEventListener('keydown', window.__bm_sim_esc);
    return;
  }
  window.__bm_sim_crash_active = true;
  window.__bm_sim_esc = function(e){ if(e.key === 'Escape'){ const el=document.getElementById('__bm_sim_crash'); if(el) el.remove(); window.__bm_sim_crash_active=false; document.removeEventListener('keydown', window.__bm_sim_esc); } };
  document.addEventListener('keydown', window.__bm_sim_esc);
  const overlay = document.createElement('div');
  overlay.id='__bm_sim_crash';
  overlay.style='position:fixed;inset:0;z-index:2147483647;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#000,#0b0b0b);color:white;font-family:system-ui;padding:20px';
  overlay.innerHTML = '<div style="max-width:900px;text-align:center;padding:28px;border-radius:12px;backdrop-filter:blur(3px)"><div style="font-size:28px;font-weight:800;margin-bottom:10px">Aw, snap â€” the site became unresponsive</div><div style="color:#d1d5db;margin-bottom:16px">The page has encountered an error. Try reloading or click Restore below.</div><div style="display:flex;gap:12px;justify-content:center"><div style="width:56px;height:56px;border-radius:50%;border:6px solid rgba(255,255,255,0.06);border-top-color:#1f9fff;animation:__bmspin 1s linear infinite"></div><button id=\\'__bm_restore\\' style=\\'padding:10px 14px;border-radius:8px;border:0;background:#1f9fff;color:#012;font-weight:700;cursor:pointer\\'>Restore Page</button><button id=\\'__bm_reload\\' style=\\'padding:10px 14px;border-radius:8px;border:0;background:#ef4444;color:#fff;font-weight:700;cursor:pointer\\'>Reload</button></div><div style="margin-top:14px;color:#94a3b8;font-size:13px">Press <kbd style="background:#0b1220;padding:4px 6px;border-radius:4px;border:1px solid rgba(255,255,255,0.04)">Esc</kbd> to restore.</div></div><style>@keyframes __bmspin{to{transform:rotate(360deg)}}#__bm_sim_crash button:active{transform:scale(.98)}</style>';
  document.body.appendChild(overlay);
  // add listeners for restore/reload
  setTimeout(function(){
    const r = document.getElementById('__bm_restore');
    const l = document.getElementById('__bm_reload');
    if(r){ r.onclick = function(){ const el=document.getElementById('__bm_sim_crash'); if(el) el.remove(); window.__bm_sim_crash_active=false; document.removeEventListener('keydown', window.__bm_sim_esc); }; }
    if(l){ l.onclick = function(){ location.reload(); } }
  }, 50);
})();
`;

/* Build the UI (order) */
makeBookmarklet('Edit Page Text', codeEdit, 'Toggle editable mode â€“ reload to restore.');
makeBookmarklet('Developer Console', codeDevConsole, 'Open an in-page mini console overlay.');
makeBookmarklet('Games Hub (overlay)', codeGamesHub, 'Plays many built-in mini-games in an overlay on the current page.');
makeBookmarklet('Mini Browser (popup)', codeMiniBrowser, 'Opens a popup window to browse a URL (allow popups).');
makeBookmarklet('Script Injector', codeScriptInjector, 'Paste & run JavaScript in the current page (trusted only).');
makeBookmarklet('Simulate Crash', codeSimCrash, 'Visual, reversible simulation of a crash. Press Esc or Restore to remove.');

</script>
</body>
</html>
